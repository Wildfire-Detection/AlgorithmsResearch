# 物联网定位技术

无线传感器网络(Wireless sensor network WSN) 集多种技术于一体正在成为当前技术研究的一个热点。确定事件发生的位置是传感器网络最基本的功能之一，对定位系统而言全球定位系统(GPS)是一个好的选择，但是在传感器网络中因为传感器节点有大小，花费和能量的约束，所以并不适合对所有节点都使用GPS定位。因此研究无线传感器网络中的非GPS低耗定位问题也成为当前的研究重点之一^[1]^。


## 技术介绍

传感器定位算法可以分为两大类：基于距离的方法和无需距离的方法。前者依赖于接收信号强度或通信信号飞行时间来估计节点间的绝对距离，但这种方法受到传输介质和周围环境的影响，通常需要复杂的硬件支持；而后者则不尝试根据接收信号强度估计点对点的距离，因此设计更加简单且成本较低。

物联网节点定位技术近年来取得了不少进展，以下是一些最新的技术和趋势：
1. **超宽带（UWB）定位**
   UWB技术提供了厘米级的精度，非常适合需要高精度定位的应用场景。由于其纳秒级的脉冲宽度和极宽的带宽，UWB在复杂的室内环境中也能保持良好的性能，并且具有较强的抗干扰能力。

2. **到达角AoA、出发角AoD、到达时间差TDoA技术**
   到达角AoA技术通过测量信号从发射端到接收端的方向来确定设备的位置。在实践中，这意味着接收设备会配备一个天线阵列，并且能够测量接收到的信号的角度。
   出发角AoD技术与AoA相反，其是基于信号从发送端发出的方向进行测量。发送设备（例如定位信标）将包含方向信息的数据包发送出去，接收设备（如移动电话）利用单一天线即可计算出自己的位置。
   到达时间差TDoA技术利用多个参考点接收到同一信号的时间差异来计算节点的位置。虽然理论上可以提供较高的定位精度，但在实际应用中需要精确的时间同步。

3. **LoRaWAN和窄带物联网（NB-IoT）中的地理定位**
   LoRaWAN和NB-IoT都是为广域网设计的低功耗通信协议，它们也支持一定程度的地理定位功能。虽然单独使用时定位精度相对较低，但结合以下算法可以提高定位精度：
   - 三角测量：利用至少三个已知位置的参考点（对于LoRaWAN是网关，对于NB-IoT是基站），根据信号到达时间和/或强度差异来确定未知节点的位置。
   - 指纹识别：预先收集特定区域内不同地点的信号特征数据库，之后通过比较实时采集的数据与数据库中的记录来确定当前位置。
   - 机器学习：训练模型预测信号特性随位置变化的模式，进而推断出节点的具体位置。

4. **基于扩展卡尔曼滤波算法提高定位精度**
   扩展卡尔曼滤波(extended Kalman filter, EKF)已广泛应用于无线传感器网络中的跟踪和位置估计，因为它具有较低的计算复杂度，可以更好地处理非线性系统^[2]^。把基于 UWB 的距离测量值和基于 ZigBee 的接收信号强度(received signal strength, RSS)测量值相结合，作为 EKF 输入的混合观测向量，达到提高定位精度的目的，对于运动目标的定位更加精确。

5. **基于RSSI比较的环重叠方法（ROCRSSI）**
   ROCRSSI是一种新的无需距离的定位方法，它使用环重叠技术来估算节点的位置。该方法的特点包括不需要传感器节点发送控制消息，通信成本低且仅限于锚节点；相比其他无需距离的定位方法，环重叠产生的交集区域较小，能提供更准确的位置估计；并且即使在无线电传播模式不规则的情况下也能保持鲁棒性。
   
   ROCRSSI的核心在于每个传感器节点通过一系列重叠的环来缩小其可能存在的区域。如果一个传感器节点S能够确定它到锚点A的距离大于A到B的距离但小于A到C的距离，则S可以认为自己位于以A为中心的环内，内径等于A到B的距离，外径等于A到C的距离。为了生成这些环，ROCRSSI比较来自特定锚点的信号强度与其他锚点接收到的相同锚点信号强度之间的差异。

6. **DV-Hop算法**
   DV-Hop算法是基本的无需距离定位方法之一，它通过经典的距离向量跳数交换使得网络中的所有节点获得到信标节点的距离（以跳数计）。然后，信标节点估计一个平均单跳距离，并将其作为修正值广播给整个网络。
   
7. **ABC算法**
   ABC算法是一种用于解决无距离测量问题的定位方案，特别适用于三维空间坐标计算。ABC算法的基本原理是从假设第一个节点位于原点开始，后续节点根据几何关系依次确定其坐标。

8. **DHA算法**
   DHA算法结合了DV-Hop算法和ABC算法的优点，旨在改善DV-Hop算法中平均单跳距离的准确性，并利用ABC算法进行三维坐标计算。该算法分为三个阶段：
   - 距离测量阶段：信标节点发送包含自身坐标和跳数的信息包，未知节点记录每个信标节点的最小跳数，并将跳数加一后转发给邻居节点。
   - 定位阶段：未知节点根据收到的平均单跳距离计算到各信标节点的距离，再使用ABC算法计算自身的坐标。
   - 定位信息返回阶段：计算出的未知节点坐标通过无线信号发送回PC，完成定位任务。

9. **基于接收信号强度指示RSSI**
   一种常见的无需距离定位方法。该技术通过测量无线电信号的强度来估算节点之间的距离。
   - 信号衰减模型：在理想条件下，无线电信号随着传播距离的增加而减弱。基于这一原理，可以建立信号强度与距离之间的关系模型。常用的模型包括自由空间路径损耗模型、对数距离路径损耗模型等。
   - RSSI测量：每个节点能够测量从邻近节点接收到的信号强度。这些测量值可用于计算发送节点与接收节点之间的相对距离。
   - 连接度量（Connectivity Metric, CM）：为了提高在不同无线电传播条件下的可靠性，定义一个连接度量CM来表征每个参考点Ri的信息。这个度量考虑了在特定时间t内由Ri发送并被其他节点接收到的信标信号数量。
   - 平均跳距计算：一段时间后，各信标节点根据记录的定位信息和来自其他信标节点的跳数，使用平均跳距方程计算自身的hopsize（即平均单跳距离），然后将该值广播给整个网络。
   - 未知节点处理：当未知节点接收到hopsize时，会将其乘以相应的跳数来计算到各个信标节点的距离。通过这种方式，即使没有直接的GPS支持，也能估计出自己的相对位置。


## 评估指标

使用定位值的**均方根误差**（Root Mean Square Error, RMSE），其为一种用于衡量预测值与观测值之间差异的统计量，广泛应用于评估模型的精度或测量系统的准确性。

计算RMSE的基本步骤如下：
1. 对于每一个观测点，计算其预测位置和真实位置之间的误差（即两者的**欧几里得距离**）。
2. 将所有这些误差分别**平方**。
3. 计算这些平方误差的**平均值**。
4. 取该平均值的**平方根**，得到的结果就是RMSE。

数学表达式为：
$$ \text{RMSE} = \sqrt{\frac{1}{n}\sum_{i=1}^{n}(P_i - O_i)^2} $$
这里，$P_i$表示第$i$个观测点的预测位置，$O_i$表示对应的实际观测位置，$n$是观测点的数量。

在定位系统中，较低的RMSE值表示预测位置与实际位置更加接近，意味着定位系统的准确性更高。

## 参考文献

[1] 刘志华,赵寿君,陈霄凯.无线传感器网络中非GPS的定位算法[J].无线电通信技术,2010,36(02):43-45.

[2] 王嫣,常晓鹏,张建平.基于EKF算法的UWB和ZigBee测量技术的混合运动目标定位[J].应用科学学报,2019,37(06):815-824.

[3] 阮华江,卢德良,方朝曦.LoRa室内定位技术综述[J].物联网技术,2025,15(06):37-39+44.DOI:10.16667/j.issn.2095-1302.2025.06.007.

[4] N. Bulusu, J. Heidemann and D. Estrin, "GPS-less low-cost outdoor localization for very small devices," in IEEE Personal Communications, vol. 7, no. 5, pp. 28-34, Oct. 2000, doi: 10.1109/98.878533.

[5] Li Nian-qiang and Li Ping, "A Range-Free Localization Scheme in Wireless Sensor Networks," 2008 IEEE International Symposium on Knowledge Acquisition and Modeling Workshop, Wuhan, China, 2008, pp. 525-528, doi: 10.1109/KAMW.2008.4810540.

[6] Chong Liu, Kui Wu and Tian He, "Sensor localization with Ring Overlapping based on Comparison of Received Signal Strength Indicator," 2004 IEEE International Conference on Mobile Ad-hoc and Sensor Systems (IEEE Cat. No.04EX975), Fort Lauderdale, FL, USA, 2004, pp. 516-518, doi: 10.1109/MAHSS.2004.1392193.

